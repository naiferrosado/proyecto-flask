{% extends "base.html" %} {% block title %}Mis Borradores - Rentflow{% endblock
%} {% block content %}
<div class="container py-5">
  <h2 class="fw-bold mb-4">Mis Borradores</h2>

  {% if objetos %}
  <div class="row">
    {% for objeto in objetos %}
    <div class="col-md-4 mb-4">
      <div class="card shadow-sm rounded-4 h-100">
        <img
          src="{{ url_for('static', filename=objeto.imagenes[0].nombre_archivo) if objeto.imagenes else 'https://placehold.co/400x250/f4f4f4/333333?text=Sin+Imagen' }}"
          class="card-img-top rounded-top-4"
          style="height: 200px; object-fit: cover"
        />
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">{{ objeto.nombre }}</h5>
          <p class="card-text flex-grow-1">
            {{ objeto.descripcion[:80] }}{% if objeto.descripcion|length > 80
            %}...{% endif %}
          </p>
          <div class="d-flex justify-content-between mt-3">
            <form
              action="{{ url_for('objetos.publicar_objeto', id=objeto.id_objeto) }}"
              method="POST"
            >
              <button class="btn btn-success btn-sm">
                <i class="fa-solid fa-upload me-1"></i> Publicar
              </button>
            </form>
            <form
              action="{{ url_for('objetos.eliminar_objeto', id=objeto.id_objeto) }}"
              method="POST"
              onsubmit="return confirm('Â¿Eliminar este borrador?');"
            >
              <button class="btn btn-danger btn-sm">
                <i class="fa-solid fa-trash me-1"></i> Eliminar
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="text-center py-5">
    <i class="fa-regular fa-lightbulb fa-3x text-muted"></i>
    <p class="text-muted mt-3 mb-0">No tienes borradores guardados.</p>
  </div>
  {% endif %}
</div>
{% endblock %}
