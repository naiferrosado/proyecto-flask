{% extends "base.html" %}
{% block title %}Reportar Incidencia - Rentflow{% endblock %}

{% block content %}
<div class="container py-5">

  <div class="card shadow-lg border-0 rounded-4">
    <div class="card-body p-4">

      <h2 class="h4 fw-bold mb-3">
        <i class="fa-solid fa-triangle-exclamation text-danger me-2"></i>
        Reportar Incidencia
      </h2>

      <p class="text-muted mb-4">
        Est치s reportando una incidencia para la reserva 
        <strong>#{{ reserva.id_reserva }}</strong> del objeto 
        <strong>{{ reserva.objeto.nombre }}</strong>.
      </p>

      <form method="POST">

        <div class="mb-4">
          <label class="form-label fw-semibold">Descripci칩n</label>
          <textarea
            id="descripcion"
            name="descripcion"
            class="form-control rounded-3"
            rows="4"
            placeholder="Describe el problema o da침o encontrado... (m치ximo 255 caracteres)"
            maxlength="255"
            required
          ></textarea>
          <small id="contador" class="text-muted">0 / 255</small>
        </div>

        <div class="d-flex justify-content-end">
          <a 
            href="{{ url_for('reservas.detalle', id=reserva.id_reserva) }}" 
            class="btn btn-outline-secondary me-2"
          >
            Cancelar
          </a>

          <button class="btn btn-danger px-4" type="submit">
            <i class="fa-solid fa-paper-plane me-1"></i>
            Enviar Reporte
          </button>
        </div>

      </form>

    </div>
  </div>

</div>

<script>
document.getElementById("descripcion").addEventListener("input", function () {
    let max = 255;
    let actual = this.value.length;
    document.getElementById("contador").textContent = `${actual} / ${max}`;
});
</script>
{% endblock %}